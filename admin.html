<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Abhinaash Driving</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
<style>
body{
font-family:Poppins,sans-serif;
background:#0b1020;
color:white;
margin:0;
padding:20px;
}
.loginBox{
max-width:400px;
margin:80px auto;
background:#111;
padding:25px;
border-radius:14px;
text-align:center;
}
input{
width:100%;
padding:12px;
margin:10px 0;
border-radius:8px;
border:none;
}
button{
padding:12px;
border:none;
border-radius:8px;
font-weight:900;
cursor:pointer;
background:#00d4ff;
width:100%;
}
.panel{
display:none;
max-width:900px;
margin:auto;
}
.card{
background:#111;
padding:16px;
border-radius:12px;
margin:10px 0;
}
.reset{
background:red;
margin-top:20px;
}
</style>
</head>
<body>
<!-- LOGIN -->
<div class="loginBox" id="loginBox">
<h2>ğŸ” Admin Login</h2>
<input type="password" id="pass" placeholder="Enter password">
<button onclick="login()">Enter Admin Panel</button>
</div>
<!-- PANEL -->
<div class="panel" id="panel">
<h2>ğŸš— Booking Admin Panel</h2>
<div id="list"></div>
</div>

<button onclick="classOn()">ğŸŸ¢ Class ON</button>
<button onclick="classOff('rain')">ğŸŒ§ Rain Off</button>
<button onclick="classOff('health')">ğŸ¥ Health</button>
<button onclick="classOff('repair')">ğŸ”§ Repair</button>
<button onclick="classOff('emergency')">ğŸš¨ Emergency</button>








<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getFirestore, collection, onSnapshot, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyC3gWi8p85z-wkoJeWbN3jYoQpcIar8Sww",
authDomain: "abinash-driving.firebaseapp.com",
projectId: "abinash-driving",
storageBucket: "abinash-driving.firebasestorage.app",
messagingSenderId: "641148830173",
appId: "1:641148830173:web:b7a500e5e7e2463da0f634"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const col = collection(db,"slotBookings");

window.login=function(){
const p=document.getElementById("pass").value;
if(p==="Admin5"){
document.getElementById("loginBox").style.display="none";
document.getElementById("panel").style.display="block";
load();
}else{
alert("Wrong password");
}
}

function load(){
onSnapshot(col,(snap)=>{
let html="";
snap.forEach(d=>{
const data=d.data();
html+=`
<div class="card">
<b>Slot:</b> ${data.slotId}<br>
<b>Seat:</b> ${data.seat}<br>
<b>Visitor:</b> ${data.visitorId}<br>
<button onclick="deleteSeat('${d.id}')">Cancel Seat</button>
</div>
`;
});
document.getElementById("list").innerHTML=html||"No bookings yet";
});
}

window.deleteSeat=async function(id){
if(!confirm("Cancel this booking?"))return;
await deleteDoc(doc(db,"slotBookings",id));
alert("Seat cancelled");
}

window.resetAll=async function(){
if(!confirm("Delete ALL bookings?"))return;
onSnapshot(col,(snap)=>{
snap.forEach(async(d)=>{
await deleteDoc(doc(db,"slotBookings",d.id));
});
});
alert("All bookings cleared");
}
</script>



import { doc, setDoc } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

async function classOn(){
await setDoc(doc(db,"siteControl","classStatus"),{
isOff:false,
reason:""
});
alert("Class ON");
}

async function classOff(r){
await setDoc(doc(db,"siteControl","classStatus"),{
isOff:true,
reason:r
});
alert("Class OFF set");
}
</body>
</html>